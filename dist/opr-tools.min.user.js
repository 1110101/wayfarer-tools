// ==UserScript==
// @name OPR-Tools
// @version 1.1.0
// @author 1110101, https://gitlab.com/1110101/opr-tools/graphs/master
// @description OPR enhancements
// @supportURL https://gitlab.com/1110101/opr-tools/issues
// @match https://opr.ingress.com/
// @match https://opr.ingress.com/
// @match https://opr.ingress.com/?login=true
// @match https://opr.ingress.com/recon
// @match https://opr.ingress.com/help
// @match https://opr.ingress.com/faq
// @match https://opr.ingress.com/guide
// @match https://opr.ingress.com/settings
// @match https://opr.ingress.com/upgrades*
// @homepageURL https://gitlab.com/1110101/opr-tools
// @grant unsafeWindow
// @grant GM_notification
// @grant GM_addStyle
// @downloadURL https://gitlab.com/1110101/opr-tools/raw/master/opr-tools.user.js
// @updateURL https://gitlab.com/1110101/opr-tools/raw/master/opr-tools.user.js
// @require https://cdnjs.cloudflare.com/ajax/libs/alertifyjs-alertify.js/1.0.11/js/alertify.js
// @require https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.4/proj4.js
// ==/UserScript==

!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(t){return e[t]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t){function n(){function e(){const e=B.document.querySelector('[ng-app="portalApp"]');B.$app=B.angular.element(e),B.$injector=B.$app.injector(),B.inject=B.$injector.invoke,B.$rootScope=B.$app.scope(),B.getService=function e(t){B.inject([t,function(e){B[t]=e}])},B.$scope=e=>B.angular.element(e).scope()}function t(){o(s),v();const e=B.document.getElementById("NewSubmissionController");if(null!==e&&null!==B.$scope(e).subCtrl){const t=B.$scope(e).subCtrl,o=t.pageData,r=B.$scope(B.document.getElementById("WhatIsItController")).whatCtrl,a=B.document.getElementById("AnswersController"),l=B.$scope(a).answerCtrl;if(""!==t.errorMessage)throw Error(41);if(void 0===o)throw Error(42);"NEW"===t.reviewType?n(l,t,r,o):"EDIT"===t.reviewType&&m(l,t,o),P(),I(t),O()}}function n(e,t,o,a){function i(e){if(("deltaY"in(e=window.event||e)&&0!==e.deltaY||"wheelDeltaY"in e&&0!==e.wheelDeltaY)&&S===v.scrollLeft){e.preventDefault();const t=e.wheelDeltaY||25*-e.deltaY||-e.detail;v.scrollLeft-=t,S=v.scrollLeft}}function s(){function n(){c.forEach(e=>{e.style.setProperty("border","none")}),o<=r-2?(c[o].style.setProperty("border","1px dashed #ebbc4a"),m.blur(),u.blur()):6===o?m.focus():7===o&&u.focus()}let o=0,r=7,l=-1,i=-1,s=e.resetLowQuality,c;e.resetLowQuality=()=>{s(),l=-1,i=-1,o=0,n()},c=t.hasSupportingImageOrStatement?B.document.querySelectorAll(".col-sm-6 .btn-group, .text-center.hidden-xs:not(.ng-hide) .btn-group, .big-submit-button"):B.document.querySelectorAll(".col-sm-6 .btn-group, .col-sm-4.hidden-xs .btn-group, .big-submit-button"),addEventListener("keydown",t=>{let s=null;if(t.keyCode>=49&&t.keyCode<=55?s=t.keyCode-48:t.keyCode>=97&&t.keyCode<=103&&(s=t.keyCode-96),!B.document.querySelector("input[type=text]:focus")&&!B.document.querySelector("textarea:focus")){if(13!==t.keyCode&&32!==t.keyCode||!B.document.querySelector('a.button[href="/recon"]'))if(13!==t.keyCode&&32!==t.keyCode||!B.document.querySelector('[ng-click="answerCtrl2.confirmLowQuality()"]'))if(13!==t.keyCode&&32!==t.keyCode||!B.document.querySelector('[ng-click="answerCtrl2.confirmLowQualityOld()"]'))if(68===t.keyCode&&B.document.querySelector("#content > button"))B.document.querySelector("#content > button").click(),o=0,t.preventDefault();else if(84===t.keyCode){const e=B.document.querySelector("#descriptionDiv > .translate-title");e&&(e.click(),t.preventDefault())}else if(89===t.keyCode){const e=B.document.querySelector("#descriptionDiv > .translate-description");e&&(e.click(),t.preventDefault())}else if(13!==t.keyCode&&32!==t.keyCode||!B.document.querySelector('[ng-click="answerCtrl2.confirmDuplicate()"]'))if(13!==t.keyCode&&32!==t.keyCode||o!==r)if(27!==t.keyCode&&111!==t.keyCode||!B.document.querySelector('[ng-click="answerCtrl2.resetDuplicate()"]'))if(27!==t.keyCode&&111!==t.keyCode||!B.document.querySelector('[ng-click="answerCtrl2.resetLowQuality()"]'))if(27===t.keyCode||111===t.keyCode)o=0,t.preventDefault();else if(106===t.keyCode||220===t.keyCode)a.canSkip&&e.skipToNext();else if(72===t.keyCode)D();else if(B.document.querySelector('[ng-click="answerCtrl2.confirmLowQuality()"]')){if(null!=s){if(-1===l)try{B.document.getElementById("sub-group-"+s).click(),l=s-1,B.document.querySelectorAll("label.sub-group kbd").forEach(e=>e.classList.add("hide"))}catch(e){}else if(-1===i)try{B.document.querySelectorAll("#reject-reason ul ul")[l].children[s-1].children[0].click(),i=s-1}catch(e){}else B.document.getElementById("root-label").click(),l=-1,i=-1,B.document.querySelectorAll("label.sub-group kbd").forEach(e=>e.classList.remove("hide"));t.preventDefault()}}else if((107===t.keyCode||9===t.keyCode)&&o<r)o++,t.preventDefault();else if((109===t.keyCode||16===t.keyCode||8===t.keyCode)&&o>0)o--,t.preventDefault();else{if(null===s||o>r-2)return;if(null!==s&&t.shiftKey)try{B.document.getElementsByClassName("customPresetButton")[s-1].click()}catch(e){}else c[o].querySelectorAll("button.button-star")[s-1].click(),o++}else B.document.querySelector('[ng-click="answerCtrl2.resetLowQuality()"]').click(),o=0,t.preventDefault();else B.document.querySelector('[ng-click="answerCtrl2.resetDuplicate()"]').click(),o=0,t.preventDefault();else B.document.querySelector('[ng-click="answerCtrl.submitForm()"]').click(),t.preventDefault();else B.document.querySelector('[ng-click="answerCtrl2.confirmDuplicate()"]').click(),o=0,t.preventDefault();else B.document.querySelector('[ng-click="answerCtrl2.confirmLowQualityOld()"]').click(),o=0,t.preventDefault();else B.document.querySelector('[ng-click="answerCtrl2.confirmLowQuality()"]').click(),o=0,t.preventDefault();else B.document.location.href="/recon",t.preventDefault();n()}}),n()}let c=!1;g(a,B.document.getElementById("descriptionDiv"),"beforeEnd");const d=new MutationObserver(e=>{for(let t of e)if(t.addedNodes.length>0&&"modal fade ng-isolate-scope"===t.addedNodes[0].className){let e=t.addedNodes[0].querySelectorAll("ul.sub-group-list");if(void 0!==e){e.forEach(e=>{let t=1;e.querySelectorAll("li > a").forEach(e=>{e.insertAdjacentHTML("afterbegin",`<kbd>${t++}</kbd> `)})});let n=1;t.addedNodes[0].querySelectorAll("label.sub-group").forEach(e=>{e.insertAdjacentHTML("beforeend",`<kbd class="pull-right ">${n++}</kbd>`)})}if(c&&null!==t.addedNodes[0].querySelector(".modal-body a[href='/recon']"))return void(B.document.location.href="/recon")}});d.observe(B.document.body,{childList:!0});let p=A(),{submitButton:u,submitAndNext:m}=f(p,e,d);if(j.get(l.OPTIONS.COMMENT_TEMPLATES)&&h(),j.get(l.OPTIONS.PRESET_FEATURE)){const t='\n<div class="row" id="oprt_custom_presets_row"><div class="col-xs-12">\n  <div>Presets&nbsp;<button class="button btn btn-default btn-xs" id="addPreset">+</button></div>\n  <div class=\'btn-group\' id="oprt_custom_presets"></div>\n</div></div>';B.document.querySelector('form[name="answers"] div.row').insertAdjacentHTML("afterend",t),N(),B.$injector.invoke(["$compile",e=>{let t=e('<span class="glyphicon glyphicon-info-sign darkgray" uib-tooltip-trigger="outsideclick" uib-tooltip-placement="left" tooltip-class="goldBorder" uib-tooltip="(OPR-Tools) Create your own presets for stuff like churches, playgrounds or crosses\'.\nHowto: Answer every question you want included and click on the +Button.\n\nTo delete a preset shift-click it."></span>&nbsp; ')(B.$scope(document.getElementById("descriptionDiv")));B.document.getElementById("addPreset").insertAdjacentElement("beforebegin",t[0])}]),B.document.getElementById("addPreset").addEventListener("click",t=>{import(r).then(t=>{t.alertify.okBtn("Save").prompt("New preset name:",(n,r)=>{r.preventDefault(),"undefined"!==n&&""!==n&&(R(n,e,o),t.alertify.success(`✔ Created preset <i>${n}</i>`),N())},e=>{e.preventDefault()})})});let n=t=>{const n=t.target||t.srcElement;let a=n.id;if(""===a||"BUTTON"!==t.target.nodeName)return;let l=F.find(e=>e.uid===a);if(t.shiftKey)return import(r).then(e=>{e.alertify.log(`Deleted preset <i>${l.label}</i>`)}),B.document.getElementById(l.uid).remove(),void M(l);e.formData.quality=l.quality,e.formData.description=l.description,e.formData.cultural=l.cultural,e.formData.uniqueness=l.uniqueness,e.formData.location=l.location,e.formData.safety=l.safety,o.whatInput=l.nodeName.split(" ")[0];let i=o.getWhatAutocomplete();for(let e=0;e<i.length;e++)if(i[e].id===l.nodeId){o.setWhatAutocompleteNode(i[e]);break}o.whatInput="",t.target.blur(),B.$rootScope.$apply(),import(r).then(e=>{e.alertify.success(`✔ Applied <i>${l.label}</i>`)})};B.document.getElementById("oprt_custom_presets").addEventListener("click",n,!1)}const v=B.document.getElementById("map-filmstrip");let S=v.scrollLeft;v.addEventListener("wheel",i,!1),v.addEventListener("DOMMouseScroll",i,!1);let C=t.initMap;t.initMap=()=>{C(),b(t.markers)},y(t.map2),b(t.markers),E(t.map,!1),E(t.map2,!0);let w=t.resetStreetView,P,T;t.resetStreetView=()=>{w(),y(t.map2),E(t.map2,!0)};let I=t.showDraggableMarker;if(t.showDraggableMarker=()=>{I(),B.getService("NewSubmissionDataService");let e=B.NewSubmissionDataService.getNewLocationMarker();j.get(l.OPTIONS.MAP_CIRCLE_40)&&google.maps.event.addListener(e,"dragend",function(){null==P?P=new google.maps.Circle({map:t.map2,center:e.position,radius:40,strokeColor:"#4CAF50",strokeOpacity:1,strokeWeight:2,fillOpacity:0}):P.setCenter(e.position)}),j.get(l.OPTIONS.MAP_CIRCLE_20)&&google.maps.event.addListener(e,"dragend",function(){null==T?T=new google.maps.Circle({map:t.map2,center:e.position,radius:20,strokeColor:"#4CCF50",strokeOpacity:1,strokeWeight:2,fillOpacity:0}):T.setCenter(e.position)})},(j.get(l.OPTIONS.MAP_CIRCLE_40)||j.get(l.OPTIONS.MAP_CIRCLE_20))&&document.querySelector("#street-view + small").insertAdjacentHTML("beforeBegin",`<small id="oprt_map_legend" class="pull-left">\n                ${j.get(l.OPTIONS.MAP_CIRCLE_40)?'<span style="color:#ebbc4a">outer circle:</span> 40m':""}\n                ${j.get(l.OPTIONS.MAP_CIRCLE_20)?'<span style="color:#effc4a">inner circle:</span> 20m':""}\n            </small>`),screen.availWidth>768){let e=B.document.querySelector('div[class="btn-group"]').parentElement;if(t.hasSupportingImageOrStatement){const t=B.document.getElementById("descriptionDiv"),n=t.querySelector("div.text-center.hidden-xs");n.insertBefore(e,n.firstChild)}else{const t=B.document.querySelector('div[class~="pull-right"]');t.insertBefore(e,t.firstChild)}}const O=B.document.querySelectorAll("#map-filmstrip > ul > li > img"),x=function(){B.open(`${this.src}=s0`,"fulldupimage")};for(let e in O)O.hasOwnProperty(e)&&O[e].addEventListener("click",()=>{const e=B.document.querySelector("#content > img");null!==e&&(e.removeEventListener("click",x),e.addEventListener("click",x),e.setAttribute("style","cursor: pointer;"))});let L="en";try{L=q.split("-")[0]}catch(e){}const _=B.document.querySelector("#descriptionDiv a"),$=_.innerText.trim();let z=B.document.createElement("a"),H=B.document.createElement("span");H.className="glyphicon glyphicon-book",H.innerHTML=" ",z.appendChild(H),z.className="translate-title button btn btn-default pull-right",z.target="translate",z.style.setProperty("padding","0px 4px"),z.href=`https://translate.google.com/#auto/${L}/${encodeURIComponent($)}`,z.id="oprt_translate_title",_.insertAdjacentElement("afterend",z);const U=B.document.querySelector("#descriptionDiv").innerHTML.split("<br>")[3].trim();if("&lt;No description&gt;"!==U&&""!==U){z=B.document.createElement("a"),(H=B.document.createElement("span")).className="glyphicon glyphicon-book",H.innerHTML=" ",z.appendChild(H),z.className="translate-description button btn btn-default pull-right",z.target="translate",z.style.setProperty("padding","0px 4px"),z.href=`https://translate.google.com/#auto/${L}/${encodeURIComponent(U)}`,z.id="oprt_translate_desc";const e=B.document.querySelectorAll("#descriptionDiv br")[2];e.insertAdjacentElement("afterend",z)}const V=B.document.querySelector('p[ng-click="subCtrl.showSupportingStatementModal()"]');null!=V&&""!==V.innerText&&(z=B.document.createElement("a"),(H=B.document.createElement("span")).className="glyphicon glyphicon-book",H.innerHTML=" ",z.appendChild(H),z.className="translate-supporting button btn btn-default pull-right",z.target="translate",z.style.setProperty("padding","0px 4px"),z.href=`https://translate.google.com/#auto/${L}/${encodeURIComponent(V.innerText)}`,z.id="oprt_translate_support",V.insertAdjacentElement("beforebegin",z));try{const e=B.document.querySelector("#map-filmstrip > ul > li:nth-child(1) > img");null!==e&&setTimeout(()=>{e.click()},500)}catch(e){}k();let X=e.showLowQualityModal;e.showLowQualityModal=()=>{X(),setTimeout(()=>{let e;B.document.querySelector('textarea[ng-model="answerCtrl2.rejectComment"]').style.setProperty("max-width","100%"),B.$injector.invoke(["$compile",e=>{let t=B.document.querySelector(".modal-body button:last-child"),n=e('<button id="submitAndSkipLowQuality" class="button" ng-click="answerCtrl2.confirmLowQuality()" ng-disabled="!(answerCtrl2.readyToSubmitSpam())" disabled="disabled">\n                        <span class="glyphicon glyphicon-floppy-disk"></span>&nbsp;<span class="glyphicon glyphicon-forward"></span></button>')(B.$scope(t));t.insertAdjacentElement("beforebegin",n[0]),B.document.getElementById("submitAndSkipLowQuality").addEventListener("click",()=>{c=!0})}])},10)};let K=markDuplicatePressed;markDuplicatePressed=e=>{K(e),setTimeout(()=>{B.$injector.invoke(["$compile",e=>{let t=B.document.querySelector(".modal-body button:last-child"),n=e('<button id="submitAndSkipDuplicate" class="button" ng-click="answerCtrl2.confirmDuplicate()">\n                      <span class="glyphicon glyphicon-floppy-disk"></span>&nbsp;<span class="glyphicon glyphicon-forward"></span></button>')(B.$scope(t));t.insertAdjacentElement("beforebegin",n[0]),B.document.getElementById("submitAndSkipDuplicate").addEventListener("click",()=>{c=!0})}])},10)},j.get(l.OPTIONS.KEYBOARD_NAV)&&s(),n=()=>{}}function m(e,t,n){function o(){function e(){let e=r.querySelector('h3[ng-show="subCtrl.pageData.locationEdits.length > 1"]');e.style.setProperty("border","none"),d.forEach(e=>{e.style.setProperty("border","none")}),a&&o===l-3?(e.style.setProperty("border-left","4px dashed #ebbc4a"),e.style.setProperty("border-top","4px dashed #ebbc4a"),e.style.setProperty("border-right","4px dashed #ebbc4a"),e.style.setProperty("padding","16px"),e.style.setProperty("margin-bottom","0"),c.blur(),s.blur()):o<l-2?(d[o].style.setProperty("border-left","4px dashed #ebbc4a"),d[o].style.setProperty("padding-left","16px"),c.blur(),s.blur()):o===l-2?c.focus():o===l&&s.focus()}let o=0,a=n.locationEdits.length>1,l=(n.descriptionEdits.length>1)+(n.titleEdits.length>1)+a+2,i;i=a?t.allLocationMarkers:[];let d=B.document.querySelectorAll('div[ng-show="subCtrl.reviewType===\'EDIT\'"] > div[ng-show="subCtrl.pageData.titleEdits.length > 1"]:not(.ng-hide),div[ng-show="subCtrl.reviewType===\'EDIT\'"] > div[ng-show="subCtrl.pageData.descriptionEdits.length > 1"]:not(.ng-hide),div[ng-show="subCtrl.reviewType===\'EDIT\'"] > div[ng-show="subCtrl.pageData.locationEdits.length > 1"]:not(.ng-hide),.big-submit-button');addEventListener("keydown",t=>{let n=null;if(t.keyCode>=49&&t.keyCode<=53?n=t.keyCode-48:t.keyCode>=97&&t.keyCode<=101&&(n=t.keyCode-96),!B.document.querySelector("input[type=text]:focus")&&!B.document.querySelector("textarea:focus")){if(13!==t.keyCode&&32!==t.keyCode||!B.document.querySelector('a.button[href="/recon"]'))if(13!==t.keyCode&&32!==t.keyCode||o!==l)if(27===t.keyCode||111===t.keyCode)o=0;else if((107===t.keyCode||9===t.keyCode)&&o<l)o++,t.preventDefault();else if((109===t.keyCode||16===t.keyCode||8===t.keyCode)&&o>0)o--,t.preventDefault();else{if(null===n||o>l-2)return;a&&o===l-3&&n<=i.length?google.maps.event.trigger(angular.element(document.getElementById("NewSubmissionController")).scope().getAllLocationMarkers()[n-1],"click"):(a&&(n=1),d[o].querySelectorAll('.titleEditBox, input[type="checkbox"]')[n-1].click(),o++)}else B.document.querySelector('[ng-click="answerCtrl.submitForm()"]').click(),t.preventDefault();else B.document.location.href="/recon",t.preventDefault();e()}}),e()}let r=B.document.querySelector("div[ng-show=\"subCtrl.reviewType==='EDIT'\"]");g(n,r,"afterEnd");const a=new MutationObserver(e=>{for(let t of e)t.addedNodes.length>0&&"modal fade ng-isolate-scope"===t.addedNodes[0].className&&null!==t.addedNodes[0].querySelector(".modal-body a[href='/recon']")&&(B.document.location.href="/recon")});a.observe(B.document.body,{childList:!0});let i=A(),{submitButton:s,submitAndNext:c}=f(i,e,a);if(j.get(l.OPTIONS.COMMENT_TEMPLATES)&&h(),E(t.locationEditsMap,!0),n.titleEdits.length>1||n.descriptionEdits.length>1)for(const e of r.querySelectorAll(".titleEditBox")){const t=e.innerText.trim();let n=B.document.createElement("a"),o=B.document.createElement("span");o.className="glyphicon glyphicon-book",o.innerHTML=" ",n.appendChild(o),n.className="translate-title button btn btn-default pull-right",n.target="translate",n.style.setProperty("padding","0px 4px"),n.href=`https://translate.google.com/#auto/${q.split("-")[0]}/${encodeURIComponent(t)}`,e.querySelector("p").style.setProperty("display","inline-block"),e.insertAdjacentElement("beforeEnd",n)}if(n.titleEdits.length<=1){let e=r.querySelector('div[ng-show="subCtrl.pageData.titleEdits.length <= 1"] h3');const t=e.innerText.trim();let n=B.document.createElement("a"),o=B.document.createElement("span");o.className="glyphicon glyphicon-book",o.innerHTML=" ",n.appendChild(o),n.className="translate-title button btn btn-default",n.target="translate",n.style.setProperty("padding","0px 4px"),n.style.setProperty("margin-left","14px"),n.href=`https://translate.google.com/#auto/${q.split("-")[0]}/${encodeURIComponent(t)}`,e.insertAdjacentElement("beforeend",n)}if(n.descriptionEdits.length<=1){let e=r.querySelector('div[ng-show="subCtrl.pageData.descriptionEdits.length <= 1"] p');const t=e.innerText.trim()||"";if("<No description>"!==t&&""!==t){let n=B.document.createElement("a"),o=B.document.createElement("span");o.className="glyphicon glyphicon-book",o.innerHTML=" ",n.appendChild(o),n.className="translate-title button btn btn-default",n.target="translate",n.style.setProperty("padding","0px 4px"),n.style.setProperty("margin-left","14px"),n.href=`https://translate.google.com/#auto/${q.split("-")[0]}/${encodeURIComponent(t)}`,e.insertAdjacentElement("beforeEnd",n)}}k(),(n.locationEdits.length<=1||t.locationEditsMap.getZoom()>19)&&t.locationEditsMap.setZoom(19),j.get(l.OPTIONS.KEYBOARD_NAV)&&o()}function g(e,t,n){const o=`\n<a class='button btn btn-default' target='intel' href='https://intel.ingress.com/intel?ll=${e.lat},${e.lng}&z=17'>Intel</a>\n<a class='button btn btn-default' target='wikimapia' href='http://wikimapia.org/#lat=${e.lat}&lon=${e.lng}&z=16'>Wikimapia</a>\n`,r=`\n<li><a target='osm' href='https://www.openstreetmap.org/?mlat=${e.lat}&mlon=${e.lng}&zoom=16'>OSM</a></li>\n<li><a target='bing' href='https://bing.com/maps/default.aspx?cp=${e.lat}~${e.lng}&lvl=16&style=a'>bing</a></li>\n<li><a target='heremaps' href='https://wego.here.com/?map=${e.lat},${e.lng},17,satellite'>HERE maps</a></li>\n<li><a targeT='zoomearth' href='https://zoom.earth/#${e.lat},${e.lng},18z,sat'>Zoom Earth</a></li>\n<li role='separator' class='divider'></li>\n<li><a target='swissgeo' href='http://map.geo.admin.ch/?swisssearch=${e.lat},${e.lng}'>CH - Swiss Geo Map</a></li>\n<li><a target='mapycz' href='https://mapy.cz/zakladni?x=${e.lng}&y=${e.lat}&z=17&base=ophoto&source=coor&id=${e.lng}%2C${e.lat}&q=${e.lng}%20${e.lat}'>CZ-mapy.cz (ortofoto)</a></li>\n<li><a target='mapycz' href='https://mapy.cz/zakladni?x=${e.lng}&y=${e.lat}&z=17&base=ophoto&m3d=1&height=180&yaw=-279.39&pitch=-40.7&source=coor&id=${e.lng}%2C${e.lat}&q=${e.lng}%20${e.lat}'>CZ-mapy.cz (orto+3D)</a></li>\n<li><a target='kompass' href='http://maps.kompass.de/#lat=${e.lat}&lon=${e.lng}&z=17'>DE - Kompass.maps</a></li>\n<li><a target='bayernatlas' href='https://geoportal.bayern.de/bayernatlas/index.html?X=${e.lat}&Y=${e.lng}&zoom=14&lang=de&bgLayer=luftbild&topic=ba&catalogNodes=122'>DE - BayernAtlas</a></li>\n<li><a target='pegel' href='http://opr.pegel.dk/?17/${e.lat}/${e.lng}'>DK - SDFE Orthophotos</a></li>\n<li><a target='kortforsyningen' href='https://skraafoto.kortforsyningen.dk/oblivisionjsoff/index.aspx?project=Denmark&lon=${e.lng}&lat=${e.lat}'>DK - Kortforsyningen Skråfoto</a></li>\n<li><a target='maanmittauslaitos' href='#'>FI - Maanmittauslaitos</a></li>\n<li><a target='paikkatietoikkuna' href='#'>FI - Paikkatietoikkuna</a></li>\n<li><a target='kakao' href='http://map.daum.net/link/map/${e.lat},${e.lng}'>KR - Kakao map</a></li>\n<li><a target='naver' href='http://map.naver.com/?menu=location&lat=${e.lat}&lng=${e.lng}&dLevel=14&title=CandidatePortalLocation'>KR - Naver map</a></li>\n<li><a target='kartverket' href='#'>NO - Kartverket</a></li>\n<li><a target='norgeibilder' href='#'>NO - Norge i Bilder</a></li>\n<li><a target='finnno' href='http://kart.finn.no/?lng=${e.lng}&lat=${e.lat}&zoom=17&mapType=normap&markers=${e.lng},${e.lat},r,'>NO - Finn Kart</a></li>\n<li><a target='toposvalbard' href='http://toposvalbard.npolar.no/?lat=${e.lat}&long=${e.lng}&zoom=17&layer=map'>NO - Polarinstituttet, Svalbard</a></li>\n<li><a target='geoportal_pl' href='#'>PL - GeoPortal</a></li>\n<li><a target='yandex' href='https://yandex.ru/maps/?ll=${e.lng},${e.lat}&z=18&mode=whatshere&whatshere%5Bpoint%5D=${e.lng},${e.lat}&whatshere%5Bzoom%5D=18'>RU - Yandex</a></li>\n<li><a target='2GIS' href='https://2gis.ru/geo/${e.lng},${e.lat}?queryState=center/${e.lng},${e.lat}/zoom/13'>RU - 2GIS</a></li>\n<li><a target='lantmateriet' href='#'>SE - Läntmateriet</a></li>\n<li><a target='hitta' href='https://www.hitta.se/kartan!~${e.lat},${e.lng},18z/tileLayer!l=1'>SE - Hitta.se</a></li>\n<li><a target='eniro' href='https://kartor.eniro.se/?c=${e.lat},${e.lng}&z=17&l=nautical'>SE - Eniro Sjökort</a></li>\n`;t.insertAdjacentHTML(n,`<div><div id="oprt_map_button_group" class='btn-group'>${o}<div class='button btn btn-default dropdown'><span class='caret'></span><ul id="oprt_map_dropdown" class='dropdown-content dropdown-menu'>${r}</div>`),B.document.getElementById("oprt_map_button_group").addEventListener("click",t=>{"maanmittauslaitos"==t.target.target?(t.preventDefault(),import(a).then(t=>{const n=t.proj4("+proj=longlat","+proj=utm +zone=35",[e.lng,e.lat]);window.open(`https://asiointi.maanmittauslaitos.fi/karttapaikka/?lang=en&share=customMarker&n=${n[1].toFixed(3)}&e=${n[0].toFixed(3)}&title=${encodeURIComponent(e.title)}&desc=&zoom=11&layers=%5B%7B%22id%22%3A2%2C%22opacity%22%3A100%7D%5D`,"maanmittauslaitos")})):"norgeibilder"==t.target.target?(t.preventDefault(),import(a).then(t=>{const n=t.proj4("+proj=longlat","+proj=utm +zone=33",[e.lng,e.lat]);window.open(`https://norgeibilder.no/?x=${Math.round(n[0])}&y=${Math.round(n[1])}&level=16&utm=33`,"norgeibilder")})):"geoportal_pl"==t.target.target?(t.preventDefault(),import(a).then(t=>{const n=t.proj4("+proj=longlat","+proj=tmerc +lat_0=0 +lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80 +units=m +no_defs",[e.lng,e.lat]);window.open(`http://mapy.geoportal.gov.pl/imap/?actions=acShowWgButtonPanel_kraj_ORTO&bbox=${n[0]-127},${n[1]-63},${n[0]+127},${n[1]+63}`,"geoportal_pl")})):"lantmateriet"==t.target.target?(t.preventDefault(),import(a).then(t=>{const n=t.proj4("+proj=longlat","+proj=utm +zone=33",[e.lng,e.lat]);window.open(`https://kso.etjanster.lantmateriet.se/?e=${Math.round(n[0])}&n=${Math.round(n[1])}&z=13`,"lantmateriet")})):"paikkatietoikkuna"==t.target.target?(t.preventDefault(),import(a).then(t=>{const n=t.proj4("+proj=longlat","+proj=utm +zone=35",[e.lng,e.lat]);window.open(`https://kartta.paikkatietoikkuna.fi/?zoomLevel=11&coord=${n[0].toFixed(3)}_${n[1].toFixed(3)}&mapLayers=801+100+default&uuid=90246d84-3958-fd8c-cb2c-2510cccca1d3&showMarker=true`,"paikkatietoikkuna")})):"kartverket"==t.target.target&&(t.preventDefault(),import(a).then(t=>{const n=t.proj4("+proj=longlat","+proj=utm +zone=33",[e.lng,e.lat]);window.open(`http://norgeskart.no/#!?project=seeiendom&layers=1002,1014&zoom=17&lat=${n[1].toFixed(2)}&lon=${n[0].toFixed(2)}&sok=${e.lat},${e.lng}`,"kartverket")}))})}function f(e,t,n){let o=e.querySelector("button");o.classList.add("btn","btn-warning");let r=o.cloneNode(!1);return o.addEventListener("click",()=>{n.disconnect()}),r.innerHTML='<span class="glyphicon glyphicon-floppy-disk"></span>&nbsp;<span class="glyphicon glyphicon-forward"></span>',r.title="Submit and go to next review",r.addEventListener("click",()=>{t.openSubmissionCompleteModal=()=>{window.location.assign("/recon")}}),B.$injector.invoke(["$compile",t=>{let n=t(r)(B.$scope(e));e.querySelector("button").insertAdjacentElement("beforeBegin",n[0])}]),{submitButton:o,submitAndNext:r}}function h(){const e="\n<button id='photo' class='button btn btn-default textButton' data-tooltip='Indicates a low quality photo'>Photo</button>\n<button id='private' class='button btn btn-default textButton' data-tooltip='Located on private residential property'>Private</button>",t="\n<li><a class='textButton' id='school' data-tooltip='Located on school property'>School</a></li>\n<li><a class='textButton' id='person' data-tooltip='Photo contains 1 or more people'>Person</a></li>\n<li><a class='textButton' id='perm' data-tooltip='Seasonal or temporary display or item'>Temporary</a></li>\n<li><a class='textButton' id='location' data-tooltip='Location wrong'>Location</a></li>\n<li><a class='textButton' id='natural' data-tooltip='Candidate is a natural feature'>Natural</a></li>\n<li><a class='textButton' id='emergencyway' data-tooltip='Obstructing emergency way'>Emergency Way</a></li>\n",n=B.document.querySelector("#submitDiv + .text-center > textarea");B.document.querySelector("#submitDiv + .text-center").insertAdjacentHTML("beforeend",`\n<div id="oprt_comment_button_group" class='btn-group dropup'>${e}\n<div class='button btn btn-default dropdown'><span class='caret'></span><ul id="oprt_comment_button_dropdown" class='dropdown-content dropdown-menu'>${t}</ul>\n</div></div><div class="hidden-xs"><button id='clear' class='button btn btn-default textButton' data-tooltip='clears the comment box'>Clear</button></div>\n`);const o=B.document.getElementsByClassName("textButton");for(let e in o)o.hasOwnProperty(e)&&o[e].addEventListener("click",e=>{const t=e.target||e.srcElement;let o=n.value;switch(o.length>0&&(o+=",\n"),t.id){case"photo":o+="Low quality photo";break;case"private":o+="Private residential property";break;case"duplicate":o+="Duplicate of previously reviewed portal candidate";break;case"school":o+="Located on primary or secondary school grounds";break;case"person":o+="Picture contains one or more people";break;case"perm":o+="Portal candidate is seasonal or temporary";break;case"location":o+="Portal candidate's location is not on object";break;case"emergencyway":o+="Portal candidate is obstructing the path of emergency vehicles";break;case"natural":o+="Portal candidate is a natural feature";break;case"clear":o=""}n.value=o,n.dispatchEvent(new Event("change")),e.target.blur()},!1)}function y(e){if(j.get(l.OPTIONS.MAP_CIRCLE_40)){const t=new google.maps.Circle({map:e,center:e.center,radius:40,strokeColor:"#ebbc4a",strokeOpacity:.8,strokeWeight:1.5,fillOpacity:0})}if(j.get(l.OPTIONS.MAP_CIRCLE_20)){const t=new google.maps.Circle({map:e,center:e.center,radius:20,strokeColor:"#eddc4a",strokeOpacity:.8,strokeWeight:1.5,fillOpacity:0})}}function b(e){for(let t=0;t<e.length;++t){const n=e[t];n.setIcon(c)}}function E(e,t){const n="google",o="kartverket",r=[{provider:"google",id:"roadmap"},{provider:"google",id:"terrain"},{provider:"google",id:"satellite"},{provider:"google",id:"hybrid"}];j.get(l.OPTIONS.NORWAY_MAP_LAYER)&&r.push({provider:"kartverket",id:"kartverket_topo",code:"topo4",label:"NO - Topo"},{provider:"kartverket",id:"kartverket_raster",code:"toporaster3",label:"NO - Raster"},{provider:"kartverket",id:"kartverket_sjo",code:"sjokartraster",label:"NO - Sjøkart"});const a="hybrid",i={scrollwheel:!0,gestureHandling:"greedy",mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:r.map(e=>e.id),style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};let s;e.setOptions(i),r.forEach(t=>{switch(t.provider){case"kartverket":e.mapTypes.set(t.id,new google.maps.ImageMapType({layer:t.code,name:t.label,alt:t.label,maxZoom:19,tileSize:new google.maps.Size(256,256),getTileUrl:function(e,t){return`//opencache.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=${this.layer}&zoom=${t}&x=${e.x}&y=${e.y}`}}))}}),s=t?l.PREFIX+l.VAR.MAP_TYPE_1:l.PREFIX+l.VAR.MAP_TYPE_2,e.addListener("maptypeid_changed",function(){B.localStorage.setItem(s,e.getMapTypeId())}),e.setMapTypeId(B.localStorage.getItem(s)||"hybrid")}function A(){const e=B.document.querySelectorAll("#submitDiv, #submitDiv + .text-center");if(screen.availWidth>768){let t=B.document.createElement("div");const n=B.document.querySelector(".classification-row");return t.className="col-xs-12 col-sm-6",e[0].style.setProperty("margin-top","16px"),t.appendChild(e[0]),t.appendChild(e[1]),n.insertAdjacentElement("afterend",t),n.classList.remove("col-sm-offset-3"),t}return e[0]}function k(){try{const e=B.$scope(B.document.getElementById("WhatIsItController")).whatCtrl;setTimeout(()=>{e.showWhat=!0,B.$rootScope.$apply()},50)}catch(e){}}function v(){B.document.querySelector(".navbar-brand").innerHTML="OPR";let e=0;j.get(l.OPTIONS.SCANNER_OFFSET_FEATURE)&&(e=parseInt(B.localStorage.getItem(l.SCANNER_OFFSET))||0);const t=B.document.querySelector("#player_stats:not(.visible-xs) div"),n=B.document.querySelector("#player_stats:not(.visible-xs) div");let o=B.document.createElement("a");o.classList.add("brand","upgrades-icon","pull-right"),o.style.setProperty("cursor","pointer"),o.style.setProperty("margin-right","20px"),o.style.setProperty("color","rgb(157, 157, 157)"),o.addEventListener("click",()=>j.showPreferencesUI(B)),o.title="OPR-Tools Preferences";const r=B.document.createElement("span");r.classList.add("glyphicon","glyphicon-cog"),o.appendChild(r),n.parentElement.insertAdjacentElement("beforebegin",o);const a=B.document.querySelector(".upgrades-icon");void 0!==a&&(a.parentElement.removeChild(a),a.style.setProperty("margin-right","20px"),a.style.setProperty("color","#9d9d9d"),a.classList.add("pull-right"),n.parentElement.insertAdjacentElement("beforebegin",a));let i=null;const s=n.children[1].src;-1!==s.indexOf("great.png")?i=d:-1!==s.indexOf("good.png")?i=p:-1!==s.indexOf("poor.png")&&(i=u),null!=i&&(n.removeChild(n.children[1]),n.children[1].insertAdjacentHTML("beforeBegin",'<img style="float: right !important; margin-top: -2px;" src="'+i+'">'),n.children[2].setAttribute("style","clear: both; margin-bottom: 10px;"));const c=parseInt(n.children[3].children[2].innerText),m=parseInt(n.children[5].children[2].innerText),g=parseInt(n.children[7].children[2].innerText),f=m+g-e,h=L(f/c*100,1),y=L(m/c*100,1),b=L(g/c*100,1),E={100:"Bronze",750:"Silver",2500:"Gold",5000:"Platin",10000:"Black"};let A,k;for(const e in E)if(f<=e){k=e,A=E[e];break}const S=f/k*100,C=n.querySelectorAll("p span.gold");C[0].insertAdjacentHTML("beforeend",", <span class='ingress-gray'>100%</span>"),C[1].insertAdjacentHTML("beforeend",`, <span class='opr-yellow'>${y}%</span>`),C[2].insertAdjacentHTML("beforeend",`, <span class='opr-yellow'>${b}%</span>`),n.querySelectorAll("p")[1].insertAdjacentHTML("afterend",`<br>\n<p><span class="glyphicon glyphicon-info-sign ingress-gray pull-left"></span><span style="margin-left: 5px;" class="ingress-mid-blue pull-left">Processed <u>and</u> accepted analyses:</span> <span class="gold pull-right">${f}, <span class="ingress-gray">${h}%</span></span></p>`),f<1e4?t.insertAdjacentHTML("beforeEnd",`\n<br><div>Next recon badge tier: <b>${A} (${k})</b><span class='pull-right'></span>\n<div class='progress'>\n<div class='progress-bar progress-bar-warning'\nrole='progressbar'\naria-valuenow='${S}'\naria-valuemin='0'\naria-valuemax='100'\nstyle='width: ${Math.round(S)}%;'\ntitle='${k-f} to go'>\n${Math.round(S)}%\n</div></div></div>\n`):t.insertAdjacentHTML("beforeEnd","<hr>"),t.insertAdjacentHTML("beforeEnd",`<p><i class="glyphicon glyphicon-share"></i> <input readonly onFocus="this.select();" style="width: 90%;" type="text"\nvalue="Reviewed: ${c} / Processed: ${m+g} (Created: ${m}/ Rejected: ${g}) / ${Math.round(h)}%"/></p>`),m<1e4&&j.get(l.OPTIONS.SCANNER_OFFSET_UI)&&(t.insertAdjacentHTML("beforeEnd",`\n<p id='scannerOffsetContainer'>\n<span style="margin-left: 5px" class="ingress-mid-blue pull-left">Scanner offset:</span>\n<input id="scannerOffset" onFocus="this.select();" type="text" name="scannerOffset" size="8" class="pull-right" value="${e}">\n</p>`),B.$injector.invoke(["$compile",e=>{let t=e('<span class="glyphicon glyphicon-info-sign ingress-gray pull-left" uib-tooltip-trigger="outsideclick" uib-tooltip-placement="left" tooltip-class="goldBorder" uib-tooltip="Use negative values, if scanner is ahead of OPR"></span>')(B.$scope(n));B.document.getElementById("scannerOffsetContainer").insertAdjacentElement("afterbegin",t[0])}]),["change","keyup","cut","paste","input"].forEach(e=>{B.document.getElementById("scannerOffset").addEventListener(e,e=>{B.localStorage.setItem(l.SCANNER_OFFSET,e.target.value)})})),v=()=>{}}function S(){function e(e,t){let n=B.document.createElement("label"),o=B.document.createElement("div");return o.className="checkbox",n.appendChild(e),n.appendChild(B.document.createTextNode(t)),o.appendChild(n),o}let t=B.document.createElement("input"),n=B.document.createElement("input");t.id=l.OPTIONS.REFRESH,t.type="checkbox",t.checked="true"===j.get(l.OPTIONS.REFRESH),n.id=l.OPTIONS.REFRESH_NOTI_DESKTOP,n.type="checkbox",n.checked="true"===j.get(l.OPTIONS.REFRESH_NOTI_DESKTOP);let o=B.document.createElement("div");o.className="panel panel-ingress",o.addEventListener("change",e=>{j.set(e.target.id,e.target.checked),e.target.checked?C():w()}),o.innerHTML="\n<div class='panel-heading'><span class='glyphicon glyphicon-refresh'></span> Refresh <sup>beta</sup> <a href='https://gitlab.com/1110101/opr-tools'><span class='label label-success pull-right'>OPR-Tools</span></a></div>\n<div id='cbxDiv' class='panel-body bg-primary' style='background:black;'></div>",o.querySelector("#cbxDiv").insertAdjacentElement("afterbegin",e(n,"Desktop notification")),o.querySelector("#cbxDiv").insertAdjacentElement("afterbegin",e(t,"Refresh every 5-10 minutes"));let r=B.document.createElement("div");r.className="col-md-4 col-md-offset-4",r.appendChild(o);let a=B.document.createElement("div");a.className="row",a.appendChild(r),B.document.getElementById("NewSubmissionController").insertAdjacentElement("beforeend",a),!0===t.checked?C():w(),S=()=>{}}function C(){function e(){clearInterval(z),B.sessionStorage.setItem(l.FROM_REFRESH,"true"),B.document.location.reload()}function t(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}let n=6e4*t(5,10);z=setInterval(()=>{e()},n)}function w(){clearInterval(z)}function P(){if(B.sessionStorage.getItem(l.FROM_REFRESH)&&(B.sessionStorage.removeItem(l.FROM_REFRESH),B.document.hidden)){let e=!0;"true"===j.get(l.OPTIONS.REFRESH_NOTI_DESKTOP)&&GM_notification({title:"OPR - New Portal Analysis Available",text:"by OPR-Tools",image:"https://gitlab.com/uploads/-/system/project/avatar/3311015/opr-tools.png"});let t=setInterval(()=>{T(`${(e=!e)?c:"/imgpub/favicon.ico"}`)},1e3);addEventListener("visibilitychange",()=>{B.document.hidden||(T("/imgpub/favicon.ico"),clearInterval(t))})}}function T(e){let t;B.document.querySelector('link[rel="shortcut icon"]').href=e}function I(e){B.document.querySelector("ul.nav.navbar-nav > li:nth-child(7)").insertAdjacentHTML("afterbegin",'<a><span id="countdownDisplay"></span></a>');let t=e.countdownDate,n=document.getElementById("countdownDisplay");n.style.setProperty("color","white");let o=setInterval(function(){let e=(new Date).getTime(),r=t-e,a=Math.floor(r%36e5/6e4),l=Math.floor(r%6e4/1e3);n.innerText=`${a}m ${l}s `,r<0?(clearInterval(o),n.innerText="EXPIRED",n.style.setProperty("color","red")):r<9e4&&n.style.setProperty("color","red")},1e3)}function O(){if(l.VERSION>(parseInt(B.localStorage.getItem(l.PREFIX+l.VERSION_CHECK))||l.VERSION-1)){B.localStorage.setItem(l.PREFIX+l.VERSION_CHECK,l.VERSION);const e=`\n        <h4><span class="glyphicon glyphicon-asterisk"></span> OPR-Tools was updated:</h4>\n        <div>${i.changelog}</div>      \n      `;import(r).then(t=>{t.alertify.closeLogOnClick(!1).logPosition("bottom right").delay(0).log(e,e=>{e.preventDefault(),e.target.closest("div.default.show").remove()}).reset()})}}function N(){F=x(B);let e="";for(const t of F)e+=`<button class='button btn btn-default customPresetButton' id='${t.uid}'>${t.label}</button>`;B.document.getElementById("oprt_custom_presets").innerHTML=e}function x(e){let t=e.localStorage.getItem(l.PREFIX+l.VAR.CUSTOM_PRESETS);return null!=t&&""!==t?JSON.parse(t):[]}function R(e,t,n){let o={uid:[,,,,,].map(()=>Math.random().toString(36)[3]).join(""),label:e,nodeName:n.whatNode.name,nodeId:n.whatNode.id,quality:t.formData.quality,description:t.formData.description,cultural:t.formData.cultural,uniqueness:t.formData.uniqueness,location:t.formData.location,safety:t.formData.safety};F.push(o),B.localStorage.setItem(l.PREFIX+l.VAR.CUSTOM_PRESETS,JSON.stringify(F))}function M(e){F=F.filter(t=>t.uid!==e.uid),B.localStorage.setItem(l.PREFIX+l.VAR.CUSTOM_PRESETS,JSON.stringify(F))}function D(){let e="<a href='https://gitlab.com/1110101/opr-tools'><span class='label label-success'>OPR-Tools</span></a> Key shortcuts<br>\n    <table class=\"table table-condensed \">\n    <thead>\n    <tr>\n      <th>Keys</th>\n      <th>Function</th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr>\n      <td><kbd>Keys 1-5</kbd> / <kbd>Numpad 1-5</kbd></td>\n      <td>Valuate current selected field (the yellow highlighted one)</td>\n    </tr>\n    <tr>\n      <td><kbd>Shift</kbd> + <kbd>Keys 1-5</kbd></td>\n      <td>Apply custom preset (if exists)</td>\n    </tr>\n    <tr>\n      <td><kbd>Keys 1-7</kbd> / <kbd>Numpad 1-7</kbd></td>\n      <td>Rejection popup: Select list element</td>\n    </tr>\n    <tr>\n      <td><kbd>D</kbd></td>\n      <td>Mark current candidate as a duplicate of the opened portal in \"duplicates\"</td>\n    </tr>\n    <tr>\n      <td><kbd>T</kbd></td>\n      <td>Open title translation</td>\n    </tr>\n    <tr>\n      <td><kbd>Y</kbd></td>\n      <td>Open description translation</td>\n    </tr>\n    <tr>\n      <td><kbd>Space</kbd> / <kbd>Enter</kbd> / <kbd>Numpad Enter</kbd></td>\n      <td>Confirm dialog / Send valuation</td>\n    </tr>\n    <tr>\n      <td><kbd>Tab</kbd> / <kbd>Numpad +</kbd></td>\n      <td>Next field</td>\n    </tr>\n    <tr>\n      <td><kbd>Shift</kbd> / <kbd>Backspace</kbd> / <kbd>Numpad -</kbd></td>\n      <td>Previous field</td>\n    </tr>\n    <tr>\n      <td><kbd>Esc</kbd> / <kbd>Numpad /</kbd></td>\n      <td>First field</td>\n    </tr>\n    <tr>\n      <td><kbd>^</kbd> / <kbd>Numpad *</kbd></td>\n      <td>Skip Portal (if possible)</td>\n    </tr>\n    </tbody>\n    </table>";import(r).then(t=>{t.alertify.closeLogOnClick(!1).logPosition("bottom right").delay(0).log(e,e=>{e.preventDefault(),e.target.closest("div.default.show").remove()}).reset()})}function L(e,t){let n;if((t=+(t||0))%1!=0)throw new RangeError("precision must be an integer");return Math.round(e*(n=Math.pow(10,t)))/n}const B="undefined"==typeof unsafeWindow?window:unsafeWindow;let _=15,F,q=window.navigator.languages[0]||window.navigator.language||"en",j=new Preferences;const $=setInterval(()=>{if(0===_)return clearInterval($),B.document.getElementById("NewSubmissionController").insertAdjacentHTML("afterBegin","\n<div id=\"oprt_init_failed\" class='alert alert-danger'><strong><span class='glyphicon glyphicon-remove'></span> OPR-Tools initialization failed, refresh page</strong></div>\n"),void S();if(B.angular){let n=!1;try{e()}catch(e){n=e}if(!n)try{t(),clearInterval($)}catch(e){console.log(e),"41"===e.message&&S(),"42"!==e.message&&clearInterval($)}}_--},500);let z}function o(e){GM_addStyle(e),o=()=>{}}
/*!
MIT License

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

*/
const r="https://glcdn.githack.com/1110101/opr-tools/raw/experimental/webpack/externals/alertify.js",a="https://glcdn.githack.com/1110101/opr-tools/raw/experimental/webpack/externals/proj4.js",l={VERSION:10100,PREFERENCES:"oprt_prefs",OPTIONS:{KEYBOARD_NAV:"keyboard_nav",NORWAY_MAP_LAYER:"norway_map_layer",PRESET_FEATURE:"preset_feature",SCANNER_OFFSET_FEATURE:"scanner_offset_feature",SCANNER_OFFSET_UI:"scanner_offset_ui",COMMENT_TEMPLATES:"comment_templates",MAP_CIRCLE_20:"map_circle_20",MAP_CIRCLE_40:"map_circle_40",REFRESH:"refresh",REFRESH_NOTI_DESKTOP:"refresh_noti_desktop"},PREFIX:"oprt_",VAR_PREFIX:"oprt_var",VAR:{SCANNER_OFFSET:"scanner_offset",MAP_TYPE_1:"map_type_1",MAP_TYPE_2:"map_type_2",CUSTOM_PRESETS:"custom_presets"},VERSION_CHECK:"version_check",FROM_REFRESH:"from_refresh"};class Preferences{constructor(){this.options={},this.defaults={[l.OPTIONS.KEYBOARD_NAV]:!0,[l.OPTIONS.NORWAY_MAP_LAYER]:!1,[l.OPTIONS.PRESET_FEATURE]:!0,[l.OPTIONS.SCANNER_OFFSET_FEATURE]:!1,[l.OPTIONS.SCANNER_OFFSET_UI]:!1,[l.OPTIONS.COMMENT_TEMPLATES]:!0,[l.OPTIONS.REFRESH]:!0,[l.OPTIONS.REFRESH_NOTI_DESKTOP]:!0,[l.OPTIONS.MAP_CIRCLE_20]:!1,[l.OPTIONS.MAP_CIRCLE_40]:!0},this.loadOptions()}showPreferencesUI(e){let t=new InOut(this),n=e.document.querySelector("body > div.container"),o=e.document.querySelector("#oprt_sidepanel_container");if(null!==o)o.classList.toggle("hide");else{n.insertAdjacentHTML("afterbegin",`\n<section id="oprt_sidepanel_container" style="\n    background: black;\n    border-left: 2px gold inset;\n    border-top: 2px gold inset;\n    border-bottom: 2px gold inset;\n    position: absolute;\n    right: 0;\n    height: 90%;\n    padding: 0 20px;\n    z-index: 10;\n    width: 400px;    \n    ">\n  <div class="row">\n    <div class="col-lg-12">\n      <h4 class="gold">OPR-Tools Preferences</h4>\n    </div>\n    <div class="col-lg-12">\n      <div class="btn-group" role="group">\n        <button id="import_all" class="btn btn-success">Import</button>\n        <button id="export_all" class="btn btn-success">Export</button>\n      </div>\n    </div>\n  </div>\n  <div id="oprt_options"></div>\n  <a id="oprt_reload" class="btn btn-warning hide"><span class="glyphicon glyphicon-refresh"></span>\n Reload to apply changes</a>\n \n <div style="position: absolute; bottom: 0; left: 0; margin:20px;"><a href="https://t.me/oprtools">${m} OPR-Tools Telegram Channel</a></div> \n</section>`);let o=e.document.getElementById("oprt_options"),a=e.document.getElementById("oprt_reload");for(let t in this.options){if(void 0===i.options[t]){this.remove(t);continue}const n=e.document.createElement("div");n.classList.add("checkbox");const r=e.document.createElement("label"),a=e.document.createElement("input");a.type="checkbox",a.name=t,a.checked=this.options[t],n.appendChild(r),r.appendChild(a),r.appendChild(e.document.createTextNode(i.options[t])),o.insertAdjacentElement("beforeEnd",n)}o.addEventListener("change",e=>{this.set(e.target.name,e.target.checked),a.classList.remove("hide")}),a.addEventListener("click",()=>{window.location.reload()}),e.document.getElementById("import_all").addEventListener("click",()=>{import(r).then(e=>{e.alertify.okBtn("Import").prompt("Paste here:",(n,o)=>{o.preventDefault(),"undefined"!==n&&""!==n&&(t.importFromString(n),e.alertify.success("✔ Imported preferences"))},e=>{e.preventDefault()})})}),e.document.getElementById("export_all").addEventListener("click",()=>{import(r).then(e=>{void 0!==navigator.clipboard?navigator.clipboard.writeText(t.exportAll()).then(()=>{e.alertify.success("✔ Exported preferences to your clipboard!")},()=>{e.alertify.alert(t.exportAll())}):e.alertify.alert(t.exportAll())})})}}loadOptions(){Object.assign(this.options,this.defaults,JSON.parse(localStorage.getItem(l.PREFERENCES)))}set(e,t){this.options[e]=t,localStorage.setItem(l.PREFERENCES,JSON.stringify(this.options))}get(e){return this.options[e]}remove(e){delete this.options[e],localStorage.setItem(l.PREFERENCES,JSON.stringify(this.options))}exportPrefs(){return JSON.stringify(this.options)}importPrefs(e){try{this.options=JSON.parse(e),localStorage.setItem(l.PREFERENCES,JSON.stringify(this.options))}catch(e){throw Error("Could not import preferences!")}}}class InOut{constructor(e){this.preferences=e}static exportVars(){let e={};for(const t in l.VAR)e[l.VAR[t]]=localStorage.getItem(l.PREFIX+l.VAR[t]);return e}static importVars(e){let t=JSON.parse(e);for(const e of t)localStorage.setItem(l.PREFIX+e,t[e])}importFromString(e){try{let t=JSON.parse(e);t.hasOwnProperty(l.PREFERENCES)&&this.preferences.importPrefs(t[l.PREFERENCES]),t.hasOwnProperty(l.VAR)&&InOut.importVars(t[l.VAR])}catch(e){throw Error("Import failed")}}exportAll(){return JSON.stringify(Object.assign({},{[l.PREFERENCES]:this.preferences.exportPrefs()},{[l.VAR_PREFIX]:InOut.exportVars()}))}}setTimeout(()=>{n()},250);const i={options:{[l.OPTIONS.COMMENT_TEMPLATES]:"Comment templates",[l.OPTIONS.KEYBOARD_NAV]:"Keyboard navigation",[l.OPTIONS.NORWAY_MAP_LAYER]:"Norwegian map layer",[l.OPTIONS.PRESET_FEATURE]:"Rating presets",[l.OPTIONS.REFRESH]:"Periodically refresh opr if no analysis is available",[l.OPTIONS.REFRESH_NOTI_DESKTOP]:"↳ With desktop notification",[l.OPTIONS.SCANNER_OFFSET_FEATURE]:"Scanner offset",[l.OPTIONS.SCANNER_OFFSET_UI]:"↳ Display offset input field",[l.OPTIONS.MAP_CIRCLE_20]:"Show 20 meter circle around candidate location (minimum portal distance)",[l.OPTIONS.MAP_CIRCLE_40]:"Show 40 meter circle around candidate location (capture range)"},changelog:"\nVersion 1.1.0\n<br>* Added translate button to supporting text\n<br><br>\nVersion 1.0.0\n<br>* New preferences menu\n<br>- Enable or disable some not so often needed features.\n<br>\n<br>* Refresh notification: removed sound option\n<br>* Added new 20m circle around candidate location, thanks to @aenariel\n<br>* Remembering selected layer type of duplicate map"},s='\n.dropdown {\nposition: relative;\ndisplay: inline-block;\n}\n\n.dropdown-content {\ndisplay: none;\nposition: absolute;\nz-index: 1;\nmargin: 0;\n}\n.dropdown-menu li a {\ncolor: #ddd !important;\n}\n.dropdown:hover .dropdown-content {\ndisplay: block;\nbackground-color: #004746 !important;\nborder: 1px solid #0ff !important;\nborder-radius: 0px !important;\n\n}\n.dropdown-menu>li>a:focus, .dropdown-menu>li>a:hover {\nbackground-color: #008780;\n}\n.modal-sm {\nwidth: 350px !important;\n}\n\n/**\n* Ingress Panel Style\n*/\n\n.panel-ingress {\nbackground-color: #004746;\nborder: 1px solid #0ff;\nborder-radius: 1px;\nbox-shadow: inset 0 0 6px rgba(255, 255, 255, 1);\ncolor: #0ff;\n}\n\n/**\n* Tooltip Styles\n*/\n\n/* Add this attribute to the element that needs a tooltip */\n[data-tooltip] {\nposition: relative;\ncursor: pointer;\n}\n\n/* Hide the tooltip content by default */\n[data-tooltip]:before,\n[data-tooltip]:after {\nvisibility: hidden;\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\nfilter: progid: DXImageTransform.Microsoft.Alpha(Opacity=0);\nopacity: 0;\npointer-events: none;\n}\n\n/* Position tooltip above the element */\n[data-tooltip]:before {\nposition: absolute;\ntop: 150%;\nleft: 50%;\nmargin-bottom: 5px;\nmargin-left: -80px;\npadding: 7px;\nwidth: relative;\n-webkit-border-radius: 3px;\n-moz-border-radius: 3px;\nborder-radius: 3px;\nbackground-color: #000;\nbackground-color: hsla(0, 0%, 20%, 0.9);\ncolor: #fff;\ncontent: attr(data-tooltip);\ntext-align: center;\nfont-size: 14px;\nline-height: 1.2;\nz-index: 100;\n}\n\n/* Triangle hack to make tooltip look like a speech bubble */\n[data-tooltip]:after {\nposition: absolute;\ntop: 132%;\nleft: relative;\nwidth: 0;\nborder-bottom: 5px solid #000;\nborder-bottom: 5px solid hsla(0, 0%, 20%, 0.9);\nborder-right: 5px solid transparent;\nborder-left: 5px solid transparent;\ncontent: " ";\nfont-size: 0;\nline-height: 0;\n}\n\n/* Show tooltip content on hover */\n[data-tooltip]:hover:before,\n[data-tooltip]:hover:after {\nvisibility: visible;\n-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";\nfilter: progid: DXImageTransform.Microsoft.Alpha(Opacity=100);\nopacity: 1;\n}\n\n.titleEditBox:hover {\n  box-shadow: inset 0 0 20px #ebbc4a;\n}\n\n.titleEditBox:active {\n  box-shadow: inset 0 0 15px 2px white;\n}\n\n.group-list li label:hover, ul.sub-group-list a:hover, #root-label:hover {\n    box-shadow: inset 0 0 5px #ffffff !important;\n}\n\n.group-list li label:active, ul.sub-group-list a:active, #root-label:active {\n    box-shadow: inset 0 0 10px 2px #ffffff !important;\n}\n\n.modal-body .button:focus, .modal-body textarea:focus {\n  outline: 2px dashed #ebbc4a;\n}\n\n.modal-body .button:hover, .gm-style-iw button.button:hover {\n  filter: brightness(150%);\n}\n\n.alertify .dialog .msg {\ncolor: black;\n}\n.alertify-logs > .default {\n    background-image: url(/img/ingress-background-dark.png) !important;\n}\n\n.btn-xs {\n  padding: 0px 7px 1px !important;\n  box-shadow: inset 0 0 4px rgba(255, 255, 255, 1);\n  -webkit-box-shadow: inset 0 0 4px rgba(255, 255, 255, 1);\n  -moz-box-shadow: inset 0 0 4px rgba(255, 255, 255, 1);\n}\n\nkbd {\n    display: inline-block;\n    padding: 3px 5px;\n    font: 11px SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;\n    line-height: 10px;\n    color: #444d56;\n    vertical-align: middle;\n    background-color: #fafbfc;\n    border: 1px solid #d1d5da;\n    border-bottom-color: #c6cbd1;\n    border-radius: 3px;\n    box-shadow: inset 0 -1px 0 #c6cbd1;\n}\n\n.opr-yellow {\n    color: #F3EADA;\n}\n.upgrades-icon:hover {\n  color: rgb(200, 200, 200) !important;\n}\n\n@media(min-width:768px) {\n  div.modal-custom1 {\n    width: 500px\n  }\n}\n\n',c="data:image/png;base64,\niVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\njwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAu\nOWwzfk4AAADlSURBVDhPY/j//z8CTw3U/V8lcvx/MfPX/2Xcd//XyWwDYxAbJAaS63c2Q9aD0Nyg\nUPS/hPXt/3bD5f93LI7DwFvnJILlSlg//K+XrUc1AKS5jOvx/wU55Vg1I2OQmlKOpzBDIM4G2UyM\nZhgGqQW5BOgdBrC/cDkbHwbpAeplAAcONgWEMChMgHoZwCGMTQExGKiXARxN2CSJwUC9VDCAYi9Q\nHIhVQicpi0ZQ2gYlCrITEigpg5IlqUm5VrILkRdghoBMxeUd5MwE1YxqAAiDvAMKE1DAgmIHFMUg\nDGKDxDCy838GAPWFoAEBs2EvAAAAAElFTkSuQmCC",d="data:image/png;base64,\n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\nWH1hTgAAAABJRU5ErkJggg==",p="data:image/png;base64,\n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\nYII=",u="data:image/png;base64,\n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\nAAAAAElFTkSuQmCC",m='\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" style="\n    width: 16px;\n    height: 16px;\n">\n<defs>\n  <linearGradient id="b" x1="0.6667" y1="0.1667" x2="0.4167" y2="0.75">\n    <stop stop-color="#37aee2" offset="0"></stop>\n    <stop stop-color="#1e96c8" offset="1"></stop>\n  </linearGradient>\n  <linearGradient id="w" x1="0.6597" y1="0.4369" x2="0.8512" y2="0.8024">\n    <stop stop-color="#eff7fc" offset="0"></stop>\n    <stop stop-color="#fff" offset="1"></stop>\n  </linearGradient>\n</defs>\n<circle cx="120" cy="120" r="120" fill="url(#b)"></circle>\n<path fill="#c8daea" d="m98 175c-3.8876 0-3.227-1.4679-4.5678-5.1695L82\n132.2059 170 80"></path>\n<path fill="#a9c9dd" d="m98 175c3 0 4.3255-1.372\n6-3l16-15.558-19.958-12.035"></path>\n<path fill="url(#w)" d="m100.04 144.41 48.36 35.729c5.5185 3.0449 9.5014\n1.4684\n10.876-5.1235l19.685-92.763c2.0154-8.0802-3.0801-11.745-8.3594-9.3482l-115.59\n 44.571c-7.8901 3.1647-7.8441 7.5666-1.4382 9.528l29.663\n  9.2583 68.673-43.325c3.2419-1.9659 6.2173-0.90899 3.7752 1.2584"></path>\n</svg>'}]);